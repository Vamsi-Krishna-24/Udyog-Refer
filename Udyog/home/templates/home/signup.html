{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Sign Up | Udyog Refer</title>
  <link rel="icon" type="image/png" href="{% static 'img/ur_logo.ico' %}">

  <script src="https://cdn.tailwindcss.com"></script>




  <script>
function loginWithGoogle() {
  const params = new URLSearchParams({
    client_id: "89385722038-m21hg6qe37os45ij3kg42k4u0ikt7fm3.apps.googleusercontent.com",  
    redirect_uri: "http://127.0.0.1:8000/api/google/callback/",
    response_type: "code",
    scope: "https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid",
    access_type: "offline",
    prompt: "select_account"
  });
  window.location.href = `https://accounts.google.com/o/oauth2/v2/auth?${params.toString()}`;
}
</script>

<script>
async function signup(){
  const data = {
    username: document.getElementById('name').value,
    email: document.getElementById('email').value,
    password: document.getElementById('password').value
  };

  const response = await fetch('/api/signup/', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(data)
  });

  const resData = await response.json();

  if (response.status === 201) {
    // store values for launchpad to use
    localStorage.setItem('uid', String(resData.user_id));
    localStorage.setItem('email', resData.email); // optional but useful
    window.location.href = '/launchpad';
  } else {
    document.getElementById('response').innerText = JSON.stringify(resData);
  }
}
</script>

<script>
const params = new URLSearchParams(window.location.search);
const email = params.get("email");
const name = params.get("name");

if (email && name) {
  localStorage.setItem("email", email);
  localStorage.setItem("username", name);
}
</script>



</head>
<body class="bg-gray-900 text-white min-h-screen flex items-center justify-center px-4">

  <div class="w-full max-w-md bg-gray-900 p-8 space-y-6">
    <!-- Logo -->
    <div class="text-center">
      <h1 class="text-4xl font-bold text-white">UR</h1>
      <p class="text-xl font-semibold mt-2">Create Account</p>
      <p class="text-sm text-gray-400">Join Udhyog Refer Today</p>
    </div>

    <!-- Sign Up form (REST version, no form tag) -->
    <div class="space-y-4">
      <input id="name" type="text" placeholder="Full Name"
        class="w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-600"
        required />
      <input id="email" type="email" placeholder="Email"
        class="w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-600"
        required />
      <input id="password" type="password" placeholder="Password"
        class="w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-600"
        required />

      <button onclick="signup()" ///// REST trigger
        class="w-full bg-blue-600 hover:bg-blue-500 text-white py-3 rounded-lg font-semibold transition">
        Create Account
      </button>

      <p id="response" class="text-sm text-center text-red-400"></p>  <!-- feedback box -->
    </div>

    <div class="flex items-center justify-center text-gray-400 text-sm gap-3">
        <span class="w-20 h-px bg-gray-500"></span> OR <span class="w-20 h-px bg-gray-500"></span>
      </div>

      <!-- Social Buttons -->
      <button onclick="loginWithGoogle()"
      class="w-full py-3 bg-[#1e293b] hover:bg-[#334155] text-gray-200 border border-gray-700 rounded-lg transition flex items-center justify-center gap-2">
        <img src="https://www.svgrepo.com/show/475656/google-color.svg" class="w-5 h-5" alt="Google"> Continue with Google
      </button>
      <button class="w-full py-3 bg-[#1e293b] hover:bg-[#334155] text-gray-200 border border-gray-700 rounded-lg transition flex items-center justify-center gap-2">
        <img src="https://www.svgrepo.com/show/448234/linkedin.svg" class="w-5 h-5" alt="LinkedIn"> Continue with LinkedIn
      </button>

    <!-- Switch to login -->
    <p class="text-center text-sm text-gray-400">
      Already have an account?
      <a href="{% url 'login' %}" class="text-blue-500 hover:underline">Log in</a>
    </p>
  </div>

  
</body>
</html>
